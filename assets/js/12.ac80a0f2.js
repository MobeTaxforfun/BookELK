(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{451:function(t,s,n){t.exports=n.p+"assets/img/LogstashPipelinefolder.c7dd69a0.png"},452:function(t,s,n){t.exports=n.p+"assets/img/pm25test.f402b3ca.png"},475:function(t,s,n){"use strict";n.r(s);var a=n(65),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"logstash-åŒ¯å‡º-csv"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logstash-åŒ¯å‡º-csv"}},[t._v("#")]),t._v(" Logstash åŒ¯å‡º CSV")]),t._v(" "),a("p",[t._v("Logstash æ“…é•·å°‡å„å¼çš„è³‡æ–™å€’å…¥ Elasticsearch ä¸­ï¼Œæ­¤ç¯‡è¨˜éŒ„ä¸€ä¸‹ä½¿ç”¨ Logstash å°‡ CSV ä¸­çš„è³‡æ–™åŒ¯å…¥ elasticsearch ä¸­çš„éŽç¨‹")]),t._v(" "),a("p",[t._v("ðŸ“˜ Reference")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/logstash/current/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜æ–¹æ–‡ä»¶"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.kaggle.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("kaggle æ•¸æ“šå»ºæ¨¡å’Œæ•¸æ“šåˆ†æžå¹³å°"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/logstash/current/plugins-filters-mutate.html#plugins-filters-mutate-convert",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mutate filter plugin"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"äº‹å‰æº–å‚™å·¥ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äº‹å‰æº–å‚™å·¥ä½œ"}},[t._v("#")]),t._v(" äº‹å‰æº–å‚™å·¥ä½œ")]),t._v(" "),a("ul",[a("li",[t._v("å…ˆä¸‹è¼‰ Logstash æœ¬æ–‡ä½¿ç”¨ç‰ˆæœ¬ logstash-7.17.1-windows ç‰ˆæœ¬")]),t._v(" "),a("li",[t._v("æ‰¾åˆ°ä¸€ä»½ CSV æ ¼å¼çš„è³‡æ–™ï¼Œä»¥"),a("code",[t._v(",")]),t._v("åˆ†éš”è³‡æ–™ï¼Œä¸¦æœ‰å®Œæ•´æ–·è¡Œ")]),t._v(" "),a("li",[t._v("è§£å£“ç¸®å¾Œå…§å®¹å¦‚ä¸‹:\n"),a("img",{attrs:{src:n(451),alt:"logstashè³‡æ–™å¤¾"}})]),t._v(" "),a("li",[t._v("åœ¨è³‡æ–™å¤¾åº•ä¸‹æ–°å¢žä¸€å€‹ "),a("code",[t._v("pipeline")]),t._v(" çš„è³‡æ–™å¤¾ä¹‹å¾Œç”¨ä¾†å­˜æ”¾ pipeline è¨­å®šæª”")]),t._v(" "),a("li",[t._v("ä»¥ä¸‹ç‚ºæœ¬æ–‡æ¸¬è©¦è³‡æ–™ä¾†è‡³ Opendata pm2.5 csv è³‡æ–™é›†çµæ§‹å¦‚ä¸‹\n"),a("img",{attrs:{src:n(452),alt:"æ¸¬è©¦è³‡æ–™"}})])]),t._v(" "),a("h2",{attrs:{id:"pipeline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pipeline"}},[t._v("#")]),t._v(" Pipeline")]),t._v(" "),a("p",[t._v("æº–å‚™å¥½ä¹‹å¾Œä¾†ç·¨å¯«ç¬¬ä¸€å€‹ pipeline")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("pm25csv.conf\nåœ¨ "),a("code",[t._v("pipeline")]),t._v(" é€™å€‹è³‡æ–™å¤¾åº•ä¸‹æ–°å¢žä¸€å€‹ pm25csv.conf æ–‡ä»¶ï¼Œæ–‡ä»¶å…§å®¹å¦‚ä¸‹:")]),t._v(" "),a("div",{staticClass:"language-JSON extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("input "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    file "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        path => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:/DockerHub/Ref/Data/OpenData/pm25.csv"')]),t._v("\n        start_position => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beginning"')]),t._v("\n        sincedb_path=>"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:/DockerHub/Ref/Data/OpenData/pm25.log"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    stdin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nfilter "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    csv "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        skip_header => "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        separator => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('","')]),t._v("\n        columns => "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"device"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"town"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"types"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lat"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lon"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"temp"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hum"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm25"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"time"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\noutput "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    elasticsearch "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        hosts => "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:9200/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        index => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm25-v1"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    stdout "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("p",[t._v("Logstash Pipline çš„ä¸‰å¤§è¦ç´ åˆ†åˆ¥æ˜¯ input;filter;output")])]),t._v(" "),a("li",[a("p",[t._v("åœ¨ Input çš„éƒ¨åˆ†æˆ‘å€‘æŒ‡å®šå…©å€‹ è³‡æ–™ä¾†æºä¸€å€‹æ˜¯ file ; å¦ä¸€å€‹æ˜¯ stdin")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("input stdin")]),t._v(" ç”¨ä¾†æ¸¬è©¦ç”¨çš„ï¼Œä¸‹é¢æœƒç¤ºç¯„æ€Žéº¼ç”¨")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("input file path")]),t._v(" è³‡æ–™ä¾†æºè·¯å¾‘")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("input file start_position")]),t._v(" å¾žç”šéº¼ä½ç½®é–‹å§‹è®€å–æ–‡ä»¶ï¼ŒLogstashé è¨­æ˜¯çµæŸä½ç½®ï¼Œå°±æ˜¯æ¯æ¬¡éƒ½æ‹¿æœ€å¾Œä¸€ç­†ï¼Œé€™ç¨®é è¨­çš„æ¨¡å¼é©åˆç”¨åœ¨è®€ log çš„ç’° å¢ƒï¼Œå› ç‚ºè‹¥æ˜¯ log çš„è©±æ¯æ¬¡ä¸€ç­†æ–°çš„æ—¥èªŒç¸½æ˜¯æœƒæ·»åŠ åœ¨æ–‡ä»¶æœ€å¾Œã€‚è€Œé€™é‚Šæˆ‘å€‘å°Žå…¥çš„æ˜¯æ•´å€‹ csv æ–‡ä»¶æ‰€ä»¥è®“ Logstash å¾žé ­é–‹å§‹è®€å–è¨­å®šç‚º "),a("code",[t._v("beginning")]),t._v(" ç•¶è®€å–åˆ°æœ€æœ«æ™‚ï¼ŒLogstash å°‡è‡ªå‹•åˆ‡æ›ç‚ºé è¨­æ¨¡å¼ "),a("code",[t._v("End")]),t._v(" è®€å–æœ€å¾Œä¸€ç­†")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("input file sincedb_path")]),t._v(" æŒ‡å®šä¸€å€‹ logï¼Œé€™å€‹ log æä¾› Logstash "),a("code",[t._v("æŽ¢é‡")]),t._v(" ç´€éŒ„æœ€å¾Œä¸€ç­†è®€å–è³‡æ–™çš„åç§»é‡ï¼Œè‹¥ä¸æŒ‡å®šæœƒè‡ªå‹•ç”¢ç”Ÿï¼Œè‹¥ä¸æƒ³ç´€éŒ„è«‹è¨­ç‚º "),a("code",[t._v("null")]),t._v("ï¼Œç‚ºäº†æ–¹ä¾¿ç®¡ç†å¤§å¤šæ™‚å€™å»ºè­°é‚„æ˜¯ç´€éŒ„ä¸€ä¸‹")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("filter csv skip_header")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("filter csv separator")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("filter csv columns")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("output elasticsearch hosts")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("output elasticsearch index")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("output stdout")])])])])])]),t._v(" "),a("p",[t._v("integerã€integer_euã€floatã€float_euã€stringã€boolean")]),t._v(" "),a("h2",{attrs:{id:"mutate-filter-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mutate-filter-plugin"}},[t._v("#")]),t._v(" Mutate filter plugin")]),t._v(" "),a("div",{staticClass:"language-JSON extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("    input "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        file "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            path => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:/DockerHub/Ref/Data/OpenData/pm25.csv"')]),t._v("\n            start_position => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beginning"')]),t._v("\n            sincedb_path=>"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:/DockerHub/Ref/Data/OpenData/pm25.log"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        stdin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    filter "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        csv "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            skip_header => "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n            separator => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('","')]),t._v("\n            columns => "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"device"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"town"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"types"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lat"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lon"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"temp"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hum"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm25"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"time"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        mutate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            convert => "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"temp"')]),t._v(" => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float"')]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hum"')]),t._v(" => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float"')]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm25"')]),t._v(" => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float"')]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    output "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        elasticsearch "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n            hosts => "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:9200/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            index => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm25-v1"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        stdout "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);