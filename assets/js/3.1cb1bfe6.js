(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{437:function(s,t,a){s.exports=a.p+"assets/img/dockerpluginsvolumes.d4336afc.png"},438:function(s,t){s.exports="data:image/png;base64,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"},439:function(s,t,a){s.exports=a.p+"assets/img/standardanalyzerresult.decb69c9.png"},440:function(s,t,a){s.exports=a.p+"assets/img/ikanalyzerresult.7766464e.png"},441:function(s,t,a){s.exports=a.p+"assets/img/ikanalyzerzhtw.ba49aa1b.png"},442:function(s,t,a){s.exports=a.p+"assets/img/ikconfigpath.2902a27a.png"},443:function(s,t,a){s.exports=a.p+"assets/img/ikconfighostpath.b20e8d2d.png"},444:function(s,t,a){s.exports=a.p+"assets/img/ikanalyzertwzhresult.05d5e188.png"},445:function(s,t,a){s.exports=a.p+"assets/img/ik_smartanalyzerresult.fcc530f1.png"},489:function(s,t,a){"use strict";a.r(t);var n=a(65),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"elasticsearch-中文分詞"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-中文分詞"}},[s._v("#")]),s._v(" Elasticsearch 中文分詞")]),s._v(" "),n("p",[s._v("在 Elasticsearch 中，中文分詞是一個非常特殊的存在，中文幾乎是不可能靠著原生的分析器做到合理的斷詞，所以我們必須借助一些其他的 Plugin 來幫助我們處理中文斷詞的問題，以下紀錄一下安裝以及使用 IK Analysis 的過程")]),s._v(" "),n("p",[s._v("📘 Reference")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/medcl/elasticsearch-analysis-ik",target:"_blank",rel:"noopener noreferrer"}},[s._v("ik 分詞器"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/sunghau/elasticsearch-analysis-ik-config-traditional-chinese",target:"_blank",rel:"noopener noreferrer"}},[s._v("ik 繁體"),n("OutboundLink")],1),s._v(" 網路上能搜到的大多是以這個為繁體字庫，但有點舊了上次更新是 2015...")]),s._v(" "),n("li",[s._v("有 survey 到用中研院的分詞 CKIP Lab，不過沒有支持 Elasticsearch 擴充，要自己打API去分詞再把分詞結果寫進 ES 裡面，然後一邊建立字庫")]),s._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/sing1ee/elasticsearch-jieba-plugin",target:"_blank",rel:"noopener noreferrer"}},[s._v("結巴分詞"),n("OutboundLink")],1)])]),s._v(" "),n("h2",{attrs:{id:"安裝-analysis-ik"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝-analysis-ik"}},[s._v("#")]),s._v(" 安裝 analysis-ik")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("到上方的連結下載相對應 Release 版本，這邊使用 elasticsearch-analysis-ik-7.17.1")])]),s._v(" "),n("li",[n("p",[s._v("接著在安裝 Elasticsearch 的目錄下找到 plugins")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("root@646ef2f0ce45:/usr/share/elasticsearch"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nLICENSE.txt  NOTICE.txt  README.asciidoc  bin  config  data  jdk  lib  logs  modules  plugins\nroot@646ef2f0ce45:/usr/share/elasticsearch"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd plugins/")]),s._v("\nroot@646ef2f0ce45:/usr/share/elasticsearch/plugins"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/usr/share/elasticsearch/plugins\n")])])])]),s._v(" "),n("li",[n("p",[s._v("將下載的 elasticsearch-analysis-ik-7.17.1 解壓縮後加到 plugins 這個資料夾下")])]),s._v(" "),n("li",[n("p",[s._v("這邊我的 Elasticsearch 使用 Docker 搭建，再啟動 Container 的時候已經將 plugins 掛載到本機下面了"),n("br"),s._v(" "),n("img",{attrs:{src:a(437),alt:"Plugin掛載"}})])]),s._v(" "),n("li",[n("p",[s._v("找到掛載的路徑直接貼上"),n("br"),s._v(" "),n("img",{attrs:{src:a(438),alt:"Plugin掛載本機"}})])]),s._v(" "),n("li",[n("p",[s._v("進到容器中察看，如果有成功對應會出現 "),n("code",[s._v("elasticsearch-analysis-ik")]),s._v(" 這個資料夾")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("root@646ef2f0ce45:/usr/share/elasticsearch/plugins"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls ")]),s._v("\nelasticsearch-analysis-ik\n")])])])]),s._v(" "),n("li",[n("p",[s._v("接著到 "),n("code",[s._v("/usr/share/elasticsearch/bin")]),s._v(" 這個路徑底下，執行 "),n("code",[s._v("elasticsearch-plugin list")]),s._v("，列出所有 plugins 會看到 elasticsearch-analysis-ik")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("root@646ef2f0ce45:/usr/share/elasticsearch/bin"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# elasticsearch-plugin list")]),s._v("\nelasticsearch-analysis-ik\n")])])])]),s._v(" "),n("li",[n("p",[s._v("重啟容器 或 Elasticsearch 確保 Plugins 已經註冊")])])]),s._v(" "),n("h2",{attrs:{id:"測試-ik-分詞"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#測試-ik-分詞"}},[s._v("#")]),s._v(" 測試 IK 分詞")]),s._v(" "),n("p",[s._v("比較一下 Ik 分詞 "),n("code",[s._v("analysis-ik")]),s._v(" 跟 內置分詞 "),n("code",[s._v("standard")]),s._v(" 的區別")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("使用 "),n("code",[s._v("standard")]),s._v(" 分析器")]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("GET /_analyze/\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"analyzer"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"standard"')]),s._v(",\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憧憬是距離理解最遙遠的感情"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("p",[n("img",{attrs:{src:a(439),alt:"預設分詞結果"}})]),s._v(" "),n("p",[s._v("輸出:")]),s._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憧"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憬"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"是"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"距"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"離"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"理"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"解"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"最"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"遙"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"遠"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"的"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"感"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"情"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),n("p",[s._v("基本上用預設的分析器來對中文做分詞，不管以什麼角度來說都不太對勁")])]),s._v(" "),n("li",[n("p",[s._v("使用 "),n("code",[s._v("analysis-ik")]),s._v(" IK分詞")]),s._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("GET /_analyze/\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"analyzer"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ik_max_word"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"text"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憧憬是距離理解最遙遠的感情"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("p",[n("img",{attrs:{src:a(440),alt:"ik分詞結果"}})]),s._v(" "),n("p",[s._v("輸出:")]),s._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憧憬"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"是"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"距"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"離"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"理解"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"最"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"遙"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"遠"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"的"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"感情"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),n("p",[s._v("結果看起來是有按照一的中文詞彙分詞了，但還是感覺哪裡不太對勁，其原因是 ik 分詞本身的字庫是簡體中文，若我們要用繁體中文需要更新一下字庫")])])]),s._v(" "),n("h2",{attrs:{id:"安裝-analysis-ik-繁中"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝-analysis-ik-繁中"}},[s._v("#")]),s._v(" 安裝  analysis-ik 繁中")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("一樣到上方的 [ik繁體] 連結中把整個 Repository 拉下來")])]),s._v(" "),n("li",[n("p",[s._v("拉下來打開資料夾長這樣，這邊關注紅色框的兩個檔案"),n("br"),s._v(" "),n("img",{attrs:{src:a(441),alt:"ik繁體安裝"}})])]),s._v(" "),n("li",[n("p",[n("code",[s._v("IKAnalyzer.cfg.xml")]),s._v(" 為 "),n("code",[s._v("IK Analyzer 扩展配置")]),s._v("，在設定中會把字典指向 custom 資料夾擴展的繁體分詞字典就放在 "),n("code",[s._v("custom")]),s._v(" 裡面")])]),s._v(" "),n("li",[n("p",[s._v("設置 IK 繁體擴展，在這個路徑下面 "),n("code",[s._v("/usr/share/elasticsearch/plugins/elasticsearch-analysis-ik/config")]),s._v("，會看到 "),n("code",[s._v("IKAnalyzer.cfg.xml")]),s._v(" 這個 XML 檔，我們要做的就是把剛剛下載的檔案複製過來")]),s._v(" "),n("p",[n("img",{attrs:{src:a(442),alt:"IK繁體擴展路徑"}})])]),s._v(" "),n("li",[n("p",[s._v("加入擴展檔案，plugins裡面的IK分詞會如下圖")]),s._v(" "),n("p",[n("img",{attrs:{src:a(443),alt:"IK繁體擴展實體路徑"}})])])]),s._v(" "),n("h2",{attrs:{id:"測試-ik繁體-分詞"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#測試-ik繁體-分詞"}},[s._v("#")]),s._v(" 測試 IK繁體 分詞")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("使用 IK繁體 分詞")]),s._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("GET /_analyze/\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"analyzer"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ik_max_word"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"text"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憧憬是距離理解最遙遠的感情"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("p",[n("img",{attrs:{src:a(444),alt:"ik分詞結果"}})]),s._v(" "),n("p",[s._v("輸出:")]),s._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憧憬"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憧"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憬"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"距離"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"距"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"離"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"理解"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"理"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"最"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"遙遠"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"遙"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"遠"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"感情"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"感"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"情"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),n("p",[s._v("這個就可以看到分析器準確地命中，"),n("code",[s._v("憧憬")]),s._v(";"),n("code",[s._v("距離")]),s._v(";"),n("code",[s._v("理解")]),s._v(";"),n("code",[s._v("遙遠")]),s._v(";"),n("code",[s._v("感情")]),s._v("，這幾個單詞，代表剛剛設定的繁體中文字典已經被加進分析器中")])])]),s._v(" "),n("h2",{attrs:{id:"使用中文分詞"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用中文分詞"}},[s._v("#")]),s._v(" 使用中文分詞")]),s._v(" "),n("p",[s._v("在 IK Analysis 的文件裡面明確指出 IK Analysis 裡面有兩種 "),n("code",[s._v("Analyzer")])]),s._v(" "),n("blockquote",[n("p",[s._v("Analyzer: ik_smart , ik_max_word , Tokenizer: ik_smart , ik_max_word\n兩個的差異是 ik_smart 僅解析出字詞，ik_max_word 會將所有的分詞結果盡可能地列舉出來，如下")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("ik_smart")]),s._v(" "),n("p",[s._v("這是使用 ik_smart 的效果")]),s._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("GET /_analyze/\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"analyzer"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ik_smart"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"text"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憧憬是距離理解最遙遠的感情"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("p",[n("img",{attrs:{src:a(445),alt:"ik_smart結果"}})]),s._v(" "),n("p",[s._v("輸出:")]),s._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憧憬"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"距離"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"理解"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"最"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"遙遠"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"感情"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])]),s._v(" "),n("li",[n("p",[s._v("ik_max_word")]),s._v(" "),n("p",[s._v("這是使用 ik_max_word 的效果(跟上面測試時的效果一樣)")]),s._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("GET /_analyze/\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"analyzer"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ik_max_word"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"text"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憧憬是距離理解最遙遠的感情"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),n("p",[s._v("輸出:")]),s._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憧憬"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憧"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"憬"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"距離"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"距"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"離"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"理解"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"理"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"最"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"遙遠"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"遙"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"遠"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"感情"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"感"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"情"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])]),s._v(" "),n("li",[n("p",[s._v("Mapping Ik 分詞")]),s._v(" "),n("p",[s._v("使用 _mapping 便可以指定 field 使用 IK Analysis")]),s._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("PUT /ikanalyzertest/_mapping\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"properties"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"title"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"analyzer"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ik_max_word"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])]),s._v(" "),n("h2",{attrs:{id:"更新字典"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#更新字典"}},[s._v("#")]),s._v(" 更新字典")]),s._v(" "),n("h2",{attrs:{id:"抓取遠端字典"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#抓取遠端字典"}},[s._v("#")]),s._v(" 抓取遠端字典")]),s._v(" "),n("p",[s._v("有用到會來更新")]),s._v(" "),n("h2",{attrs:{id:"結巴分詞"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#結巴分詞"}},[s._v("#")]),s._v(" 結巴分詞")]),s._v(" "),n("p",[s._v("待續")])])}),[],!1,null,null,null);t.default=r.exports}}]);