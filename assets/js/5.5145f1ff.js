(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{429:function(a,s,t){a.exports=t.p+"assets/img/listedaliases.32dcd01b.png"},430:function(a,s,t){a.exports=t.p+"assets/img/listindexbyalias.c90b6273.png"},431:function(a,s){a.exports="data:image/png;base64,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"},448:function(a,s,t){"use strict";t.r(s);var e=t(65),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"elasticsearch-aliases"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-aliases"}},[a._v("#")]),a._v(" Elasticsearch Aliases")]),a._v(" "),e("p",[a._v("本章紀錄 Elasticsearch Aliases (別名)，以下為官方文件靈魂說明，基本上靈力值太低的我根本看不懂...")]),a._v(" "),e("blockquote",[e("p",[a._v("An alias is a secondary name for a group of data streams or indices. Most Elasticsearch APIs accept an alias in place of a data stream or index name.")]),a._v(" "),e("p",[a._v("You can change the data streams or indices of an alias at any time. If you use aliases in your application’s Elasticsearch requests, you can reindex data with no downtime or changes to your app’s code.")])]),a._v(" "),e("p",[a._v("為什麼要對索引使用 Alias，自身理解")]),a._v(" "),e("ul",[e("li",[a._v("靈活性")]),a._v(" "),e("li",[a._v("方便修改 Mapping")]),a._v(" "),e("li",[a._v("如同關聯型資料庫中的 View 表")])]),a._v(" "),e("p",[a._v("⭐️ 以下打一百個星號 ⭐️ * 100")]),a._v(" "),e("p",[a._v("在 elasticsearch 中別名有兩種，"),e("strong",[a._v("在查資料的時候先確定文章是在說哪種 alias")]),a._v("，這一篇是紀錄  index alias，在官方文件中")]),a._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/aliases.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Aliases"),e("OutboundLink")],1),a._v(" 這是給 data stream alias 和  index alias 用的")]),a._v(" "),e("li",[e("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/field-alias.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Alias field type"),e("OutboundLink")],1),a._v(" 這是給 field 用的，是一種 field type")])]),a._v(" "),e("p",[a._v("📘 Reference")]),a._v(" "),e("ul",[e("li",[a._v("官方文件；"),e("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/aliases.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("走這裡"),e("OutboundLink")],1)])]),a._v(" "),e("h2",{attrs:{id:"index-alias-的使用情境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#index-alias-的使用情境"}},[a._v("#")]),a._v(" Index Alias 的使用情境")]),a._v(" "),e("p",[a._v("🔮 Alias Should Know")]),a._v(" "),e("ul",[e("li",[a._v("可以訂自請求範圍，如同 MySQL & MSSQL View")]),a._v(" "),e("li",[a._v("使用 Alias Reindex")])]),a._v(" "),e("p",[a._v("📘 測試操作步驟")]),a._v(" "),e("ul",[e("li",[a._v("先建入 Template 資料 : Index為 bookstore 與三筆測試資料")]),a._v(" "),e("li",[a._v("對 Index bookstore 增加 mybookstore alias")]),a._v(" "),e("li",[a._v("對 mybookstore alias 使用 alias filter")]),a._v(" "),e("li",[a._v("簡單的試一下 Reindex")])]),a._v(" "),e("h3",{attrs:{id:"用貓列出所有的-alias"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用貓列出所有的-alias"}},[a._v("#")]),a._v(" 用貓列出所有的 Alias")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("GET _cat/aliases?v\n")])])]),e("p",[e("img",{attrs:{src:t(429),alt:"列出所有別名"}})]),a._v(" "),e("h3",{attrs:{id:"新增、更新-index-alias"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新增、更新-index-alias"}},[a._v("#")]),a._v(" 新增、更新 Index Alias")]),a._v(" "),e("p",[e("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/indices-add-alias.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方文件"),e("OutboundLink")],1)]),a._v(" "),e("ul",[e("li",[e("p",[a._v("新增與更新的方法")]),a._v(" "),e("ul",[e("li",[e("p",[e("code",[a._v("POST <target>/_alias/<alias>")])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("POST <target>/_aliases/<alias>")])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("PUT <target>/_alias/<alias>")])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("PUT <target>/_aliases/<alias>")])]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("PUT bookstore/_alias/mybookstore\n")])])]),e("div",{staticClass:"language-JSON extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"acknowledged"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])])])]),a._v(" "),e("li",[e("p",[a._v("使用 Alias 查詢 Index 來得到快樂")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("GET mybookstore/_search\n")])])]),e("p",[e("img",{attrs:{src:t(430),alt:"使用alias來查詢"}})])]),a._v(" "),e("li",[e("p",[a._v("查詢 alias")]),a._v(" "),e("ul",[e("li",[e("p",[e("code",[a._v("GET _alias/<alias>")]),a._v(" 拿搜尋")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("GET _alias")]),a._v(" 全部拿")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("GET <target>/_alias/<alias>")]),a._v(" 在某個Index下拿")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("GET bookstore/_alias/*\nGET bookstore/_alias/mybookstore\n")])])]),e("p",[e("img",{attrs:{src:t(431),alt:"取得alias"}})])])])]),a._v(" "),e("li",[e("p",[a._v("刪除 alias")]),a._v(" "),e("ul",[e("li",[e("p",[e("code",[a._v("DELETE /<index>/_alias/<alias>")])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("DELETE /<index>/_aliases/<alias>")])]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("DELETE /bookstore/_alias/mybookstore\n")])])]),e("div",{staticClass:"language-JSON extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"acknowledged"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])])])]),a._v(" "),e("li",[e("p",[a._v("Aliases API")])])]),a._v(" "),e("blockquote",[e("p",[a._v("Performs one or more alias actions in a single atomic operation.")])]),a._v(" "),e("p",[a._v("透過原子操作來設定 Aliases，當成類似檢視表的功能只取出，出版社為悅知文化的資料")]),a._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("POST /_aliases\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"actions"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"add"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"index"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bookstore"')]),a._v(",\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"alias"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"mybookstore"')]),a._v(",\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"filter"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"term"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"publisher"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"悅知文化"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);