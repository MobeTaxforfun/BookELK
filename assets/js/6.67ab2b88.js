(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{475:function(t,s,a){t.exports=a.p+"assets/img/LogstashPipelinefolder.c7dd69a0.png"},476:function(t,s,a){t.exports=a.p+"assets/img/pm25test.f402b3ca.png"},477:function(t,s,a){t.exports=a.p+"assets/img/pluginlist.be1114c6.png"},478:function(t,s,a){t.exports=a.p+"assets/img/terminalresult.dec75601.png"},479:function(t,s,a){t.exports=a.p+"assets/img/kibanaresult.8d49c7ae.png"},480:function(t,s,a){t.exports=a.p+"assets/img/importcsvProblem.711c6968.png"},481:function(t,s,a){t.exports=a.p+"assets/img/hellowolrd.aed53ab2.png"},482:function(t,s,a){t.exports=a.p+"assets/img/csvnewrow.82cbdeb0.png"},515:function(t,s,a){"use strict";a.r(s);var n=a(65),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"logstash-匯出-csv"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#logstash-匯出-csv"}},[t._v("#")]),t._v(" Logstash 匯出 CSV")]),t._v(" "),n("p",[t._v("Logstash 擅長將各式的資料倒入 Elasticsearch 中，此篇記錄一下使用 Logstash 將 CSV 中的資料匯入 elasticsearch 中的過程")]),t._v(" "),n("p",[t._v("📘 Reference")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://www.elastic.co/guide/en/logstash/current/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文件"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.kaggle.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("kaggle 數據建模和數據分析平台"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.elastic.co/guide/en/logstash/current/plugins-filters-mutate.html#plugins-filters-mutate-convert",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mutate filter plugin"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.elastic.co/guide/en/logstash/current/plugins-filters-csv.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Csv filter plugin"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"事前準備工作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事前準備工作"}},[t._v("#")]),t._v(" 事前準備工作")]),t._v(" "),n("ul",[n("li",[t._v("先下載 Logstash 本文使用版本 logstash-7.17.1-windows 版本")]),t._v(" "),n("li",[t._v("找到一份 CSV 格式的資料，以"),n("code",[t._v(",")]),t._v("分隔資料，並有完整斷行")]),t._v(" "),n("li",[t._v("解壓縮後內容如下:"),n("br"),t._v(" "),n("img",{attrs:{src:a(475),alt:"logstash資料夾"}})]),t._v(" "),n("li",[t._v("在資料夾底下新增一個 "),n("code",[t._v("pipeline")]),t._v(" 的資料夾之後用來存放 pipeline 設定檔")]),t._v(" "),n("li",[t._v("以下為本文測試資料來至 Opendata pm2.5 csv 資料集結構如下:"),n("br"),t._v(" "),n("img",{attrs:{src:a(476),alt:"測試資料"}})])]),t._v(" "),n("h2",{attrs:{id:"pipeline"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pipeline"}},[t._v("#")]),t._v(" Pipeline")]),t._v(" "),n("p",[t._v("準備好之後來編寫第一個 pipeline")]),t._v(" "),n("h3",{attrs:{id:"pm25csv-conf"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pm25csv-conf"}},[t._v("#")]),t._v(" pm25csv.conf")]),t._v(" "),n("p",[t._v("在 "),n("code",[t._v("pipeline")]),t._v(" 這個資料夾底下新增一個 pm25csv.conf 文件，文件內容如下:")]),t._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[t._v("input "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    file "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        path => "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:/DockerHub/Ref/Data/OpenData/pm25.csv"')]),t._v("\n        start_position => "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beginning"')]),t._v("\n        sincedb_path=>"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:/DockerHub/Ref/Data/OpenData/pm25.log"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    stdin "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nfilter "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    csv "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        skip_header => "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        separator => "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('","')]),t._v("\n        columns => "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"device"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"town"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"types"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lat"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lon"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"temp"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hum"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm25"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"time"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\noutput "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    elasticsearch "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        hosts => "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:9200/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        index => "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm25-v1"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    stdout "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ul",[n("li",[n("p",[t._v("Logstash Pipline 的三大要素分別是 input; filter; output")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("Input")]),t._v(" : 我們指定兩個 資料來源一個是 file ; 另一個是 stdin")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("input stdin")]),t._v(" 用來測試用的，下面會示範怎麼用")]),t._v(" "),n("li",[n("code",[t._v("input file path")]),t._v(" 資料來源路徑")]),t._v(" "),n("li",[n("code",[t._v("input file start_position")]),t._v(" 從甚麼位置開始讀取文件，Logstash預設是結束位置，就是每次都拿最後一筆，這種預設的模式適合用在讀 log 的環 境，因為若是 log 的話每次一筆新的日誌總是會添加在文件最後。而這邊我們導入的是整個 csv 文件所以讓 Logstash 從頭開始讀取設定為 "),n("code",[t._v("beginning")]),t._v(" 當讀取到最末時，Logstash 將自動切換為預設模式 "),n("code",[t._v("End")]),t._v(" 讀取最後一筆")]),t._v(" "),n("li",[n("code",[t._v("input file sincedb_path")]),t._v(" 指定一個 log，這個 log 提供 Logstash "),n("code",[t._v("探針")]),t._v(" 紀錄最後一筆讀取資料的偏移量，若不指定會自動產生，若不想紀錄請設為 "),n("code",[t._v("null")]),t._v("，為了方便管理大多時候建議還是紀錄一下")])])]),t._v(" "),n("li",[n("p",[n("code",[t._v("filter")]),t._v(" : 這邊使用 "),n("code",[t._v("Csv filter plugin")]),t._v(" 來做資料處理，文件請見置頂 Reference")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("filter csv skip_header")]),t._v(" 指定跳過標頭")]),t._v(" "),n("li",[n("code",[t._v("filter csv separator")]),t._v(" 設定為 "),n("code",[t._v('","')]),t._v(" 以逗號標示資料間隔")]),t._v(" "),n("li",[n("code",[t._v("filter csv columns")]),t._v(" 每個欄位資料如何解析進 Elasticsearch")])])]),t._v(" "),n("li",[n("p",[n("code",[t._v("output")]),t._v(" : 主要輸出資料的目的地 Stdout and Elasticsearch，使用 "),n("code",[t._v("Elasticsearch output plugin")]),t._v("，還有許多不同的 plugin 可以輸出資料到其他的載體")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("output elasticsearch hosts")]),t._v(" 預計輸出目標的 elasticsearch hosts")]),t._v(" "),n("li",[n("code",[t._v("output elasticsearch index")]),t._v(" 預計輸出到哪個 index 下")]),t._v(" "),n("li",[n("code",[t._v("output stdout")]),t._v(" 用來測試用的，下面會示範怎麼用")])])])]),t._v(" "),n("p",[t._v("⚠️ 這裡很重要 如果在 windows 環境下 "),n("code",[t._v('path => "D:/DockerHub/Ref/Data/OpenData/pm25.csv"')]),t._v(" 路徑的正反斜線請注意"),n("br"),t._v("\n   => 這是 windows 輸出的路徑 "),n("code",[t._v("D:\\DockerHub\\Ref\\Data\\OpenData\\pm25.csv")]),t._v(" (這是錯的)"),n("br"),t._v("\n   => 這是 logstash 中約定的路徑 "),n("code",[t._v("D:/DockerHub/Ref/Data/OpenData/pm25.csv")]),t._v(" (這是對的)"),n("br"),t._v("\n   => 下面那個才可以成功運作")]),t._v(" "),n("h2",{attrs:{id:"匯入資料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#匯入資料"}},[t._v("#")]),t._v(" 匯入資料")]),t._v(" "),n("h3",{attrs:{id:"實用指令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#實用指令"}},[t._v("#")]),t._v(" 實用指令")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("相關的指令集都在 "),n("code",[t._v("bin")]),t._v(" 裡面可以直接呼叫，檢視 Logstash 中的 plugin")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("bin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("logstash-plugin list\n")])])]),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("  logstash-codec-avro\n  logstash-codec-cef\n  logstash-codec-collectd\n  logstash-codec-dots\n  logstash-codec-edn\n  logstash-codec-edn_lines\n  logstash-codec-es_bulk\n  logstash-codec-fluent\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".下略\n")])])]),n("p",[n("img",{attrs:{src:a(477),alt:"logstashpluginlist"}})])]),t._v(" "),n("li",[n("p",[t._v("確定使用到 plugin 都已經在列表裡面，如下")]),t._v(" "),n("ul",[n("li",[t._v("logstash-input-stdin")]),t._v(" "),n("li",[t._v("logstash-input-file")]),t._v(" "),n("li",[t._v("logstash-filter-csv")]),t._v(" "),n("li",[t._v("logstash-output-elasticsearch")]),t._v(" "),n("li",[t._v("logstash-output-stdout\n如果有缺，到官方去下載相對應版本的 plugin，但基本上應該都會有")])])])]),t._v(" "),n("h3",{attrs:{id:"啟動-logstash-匯入資料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#啟動-logstash-匯入資料"}},[t._v("#")]),t._v(" 啟動 Logstash 匯入資料")]),t._v(" "),n("p",[t._v("使用指令啟動 Logstash，-f 後面指定編寫好的 pipeline config (還有一個方法是用 pipeline.yml 中，使用方法預計也會有一篇筆記)")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("  ."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("bin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("logstash -f ."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("pipeline"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("pm25csv.conf\n")])])]),n("p",[t._v("若是啟動成功應該會看到資料一筆一筆的顯示在 terminal 上面，那是因為 pipeline "),n("code",[t._v("output stdout")]),t._v(" 這個就是將輸出一併顯示在 terminal 上")]),t._v(" "),n("p",[n("img",{attrs:{src:a(478),alt:"logstashpluginlist"}})]),t._v(" "),n("h3",{attrs:{id:"kibana-查看結果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#kibana-查看結果"}},[t._v("#")]),t._v(" Kibana 查看結果")]),t._v(" "),n("p",[t._v("使用 GET Index search 查看")]),t._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[t._v(" GET pm25-v1/_search\n")])])]),n("p",[t._v("可以看到 pm25-v1 這個 index 中已經有 1338 筆資料")]),t._v(" "),n("p",[n("img",{attrs:{src:a(479),alt:"kibanaresult"}})]),t._v(" "),n("h2",{attrs:{id:"mutate-filter-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mutate-filter-plugin"}},[t._v("#")]),t._v(" Mutate filter plugin")]),t._v(" "),n("p",[t._v('雖然資料已經匯入成功了，但仔細觀察的話會發現有些問題，用 mapping 指定來查看 index mapping，會發現 "temp","hum","pm25" 這幾個欄位是 text ，在一般的應用我們更多時候希望這幾個欄位是以數值方式去對應，所以我們要修改一下 pipeline')]),t._v(" "),n("p",[n("img",{attrs:{src:a(480),alt:"kibanaresult"}})]),t._v(" "),n("p",[t._v("對應的方法其實還有一種是一開始就先設定好 index 與 index mapping，這樣使用 Logstash 時只要將資料導入即可，不過這邊嘗試一下不用事先去建立 mapping 的方法，我們使用 mutate plugin 來處理，詳細文件見置頂( mutate 操作彈性滿大的)")]),t._v(" "),n("p",[t._v("mutate plugin 提供了幾種資料型態對應 integer;integer_eu;float;float_eu;string;boolean，只要在 "),n("code",[t._v("filter")]),t._v(" 中引入 "),n("code",[t._v("mutate plugin")])]),t._v(" "),n("h3",{attrs:{id:"引入-mutate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#引入-mutate"}},[t._v("#")]),t._v(" 引入 mutate")]),t._v(" "),n("p",[n("code",[t._v("filter mutate convert")]),t._v(" 欄位 => 指定型別，就可以將數值轉型，最後設定檔如下")]),t._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[t._v("    input "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        file "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            path => "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:/DockerHub/Ref/Data/OpenData/pm25.csv"')]),t._v("\n            start_position => "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beginning"')]),t._v("\n            sincedb_path=>"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:/DockerHub/Ref/Data/OpenData/pm25.log"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        stdin "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    filter "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        csv "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            skip_header => "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n            separator => "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('","')]),t._v("\n            columns => "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"device"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"town"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"types"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lat"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lon"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"temp"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hum"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm25"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"time"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        mutate "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            convert => "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"temp"')]),t._v(" => "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float"')]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hum"')]),t._v(" => "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float"')]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm25"')]),t._v(" => "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float"')]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    output "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        elasticsearch "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n            hosts => "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:9200/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            index => "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm25-v1"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        stdout "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"最終成果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#最終成果"}},[t._v("#")]),t._v(" 最終成果")]),t._v(" "),n("p",[t._v("一樣把 mapping 提取出來檢視")]),t._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[t._v("GET pm25-v1/_mapping/field/hum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("temp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("pm25\n")])])]),n("p",[t._v("可以看到 hum,temp,pm25 這三個 field 都已經是 "),n("code",[t._v('"type" : "float"')])]),t._v(" "),n("div",{staticClass:"language-JSON extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pm25-v1"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mappings"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hum"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"full_name"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hum"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mapping"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hum"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float"')]),t._v("\n                  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n              "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"temp"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"full_name"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"temp"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mapping"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"temp"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float"')]),t._v("\n                  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n              "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pm25"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"full_name"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm25"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mapping"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pm25"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float"')]),t._v("\n                  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n              "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"補充"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#補充"}},[t._v("#")]),t._v(" 補充")]),t._v(" "),n("h3",{attrs:{id:"stdin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#stdin"}},[t._v("#")]),t._v(" Stdin")]),t._v(" "),n("p",[t._v("基本上這個也可以不用加，不過加了可以用來偵錯，這個可以讓 terminal 接收輸入，例如輸入 Hello world，就會插入一筆 Hello world 資料到指定的 index 中\n"),n("img",{attrs:{src:a(481),alt:"kibanaresult"}})]),t._v(" "),n("h3",{attrs:{id:"csv-新資料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#csv-新資料"}},[t._v("#")]),t._v(" CSV 新資料")]),t._v(" "),n("p",[t._v("如果往 CSV 裡面新增資料的話，探針會繼續移動並將資料自動推送到 elasticsearch 中，增加一筆測試\n"),n("img",{attrs:{src:a(482),alt:"kibanaresult"}})]),t._v(" "),n("h3",{attrs:{id:"重新載入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#重新載入"}},[t._v("#")]),t._v(" 重新載入")]),t._v(" "),n("p",[t._v("若要重新載入要將指針歸零，或是把 .log 直接刪除")])])}),[],!1,null,null,null);s.default=e.exports}}]);