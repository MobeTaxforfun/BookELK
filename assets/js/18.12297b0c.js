(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{461:function(t,s,e){t.exports=e.p+"assets/img/indexArchitechture.15faf759.png"},505:function(t,s,e){"use strict";e.r(s);var a=e(65),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"elasticsearch-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-index"}},[t._v("#")]),t._v(" Elasticsearch Index")]),t._v(" "),a("p",[t._v("📗 "),a("strong",[t._v("Chapter Objectives")])]),t._v(" "),a("ul",[a("li",[t._v("索引的基本")]),t._v(" "),a("li",[t._v("基本API的使用")])]),t._v(" "),a("p",[t._v("📘 "),a("strong",[t._v("Reference")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文件"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/elastic-stack-glossary/current/terms.html#i-glos",target:"_blank",rel:"noopener noreferrer"}},[t._v("Terminology"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.elastic.co/blog/what-is-an-elasticsearch-index",target:"_blank",rel:"noopener noreferrer"}},[t._v("What is an Elasticsearch Index?(2013)"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("📕 "),a("strong",[t._v("Notice")])]),t._v(" "),a("p",[t._v("基本上能看官方文件就去看，沒有人會比官方更懂他們的產品")]),t._v(" "),a("h2",{attrs:{id:"basic-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#basic-definition"}},[t._v("#")]),t._v(" Basic Definition")]),t._v(" "),a("blockquote",[a("p",[t._v("An index is like a ‘database' in a relational database."),a("br"),t._v("\nIt has a mapping which defines multiple types.\nAn index is a logical namespace which maps to one or more primary shards and can have zero or more replica shards.")])]),t._v(" "),a("ul",[a("li",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("類似關聯式資料庫的 database")])])],1),t._v(" "),a("li",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("必須透過 mapping 定義 types")])])],1),t._v(" "),a("li",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v('Index 是對一個"概念"的命名，Index 這個概念基本上包含一到多個 primary shards (分片)還有 零到多個 replica shards (副本)')])])],1)]),t._v(" "),a("p",[t._v("官方公式書裡面提到對 "),a("code",[t._v("Index")]),t._v(" 的定義:")]),t._v(" "),a("ul",[a("li",[a("blockquote",[a("p",[t._v("Collection of JSON documents.")])])]),t._v(" "),a("li",[a("blockquote",[a("p",[t._v("To add one or more JSON documents to Elasticsearch. This process is called indexing.")])])])]),t._v(" "),a("p",[t._v("有兩件事都叫 "),a("code",[t._v("Index")]),t._v(" ，在閱讀原文文件時可能要區分一下:")]),t._v(" "),a("ul",[a("li",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("一個是實體的 JSON documents 之集合")])])],1),t._v(" "),a("li",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("一個是動作把 JSON documents 加入 Elasticsearch 這件事")])])],1)]),t._v(" "),a("p",[t._v("在 Elasticsearch 中 "),a("code",[t._v("Index")]),t._v(" 為多個 Document 的集合，而 "),a("code",[t._v("Document")]),t._v(" 又是多個 "),a("code",[t._v("fields")]),t._v(" 的集合，"),a("br"),t._v("\n每個索引都可有自己的 "),a("code",[t._v("mapping")]),t._v("，mapping 會決定 "),a("code",[t._v("Document")]),t._v(" 中每個 "),a("code",[t._v("fields")]),t._v(" 的名稱與類型；"),a("br"),t._v("\n在 ES 中 "),a("code",[t._v("index")]),t._v(" 也可以分布在不同的 "),a("code",[t._v("Shard")]),t._v(" 上，來達到儲存空間的水平擴展，以系統架構的角度可以這樣看:"),a("br"),t._v(" "),a("br"),t._v(" "),a("img",{attrs:{src:e(461),alt:"Index Architecture"}})]),t._v(" "),a("p",[t._v("官方 Index APIs 文件上將 Index 分成幾個小節:")]),t._v(" "),a("ul",[a("li",[a("font",{attrs:{color:"63C5DA",size:"4"}},[a("strong",[t._v("Index management")])])],1),t._v(" "),a("li",[a("font",{attrs:{color:"63C5DA",size:"4"}},[a("strong",[t._v("Mapping management")])])],1),t._v(" "),a("li",[a("font",{attrs:{color:"63C5DA",size:"4"}},[a("strong",[t._v("Alias management")])])],1),t._v(" "),a("li",[a("font",{attrs:{color:"63C5DA",size:"4"}},[a("strong",[t._v("Index settings")])])],1),t._v(" "),a("li",[a("font",{attrs:{color:"63C5DA",size:"4"}},[a("strong",[t._v("Index templates")])])],1),t._v(" "),a("li",[a("font",{attrs:{color:"63C5DA",size:"4"}},[a("strong",[t._v("Monitoring")])])],1),t._v(" "),a("li",[a("font",{attrs:{color:"63C5DA",size:"4"}},[a("strong",[t._v("Status management")])])],1),t._v(" "),a("li",[a("font",{attrs:{color:"63C5DA",size:"4"}},[a("strong",[t._v("Dangling indices")])])],1)]),t._v(" "),a("p",[t._v("依自身的經驗談，若要最快速上手 :")]),t._v(" "),a("p",[a("code",[t._v("Index management")]),t._v("   : 必須先掌握，畢竟他是最基礎的 Index CURD"),a("br"),t._v(" "),a("code",[t._v("Mapping management")]),t._v(" : 若已經有一些應用要實作，需要掌握這個，才能指定一些 Mapping 相關的設計"),a("br"),t._v(" "),a("code",[t._v("Alias management")]),t._v("   : 有很多的 Index 需要管理時，或者需要 ReIndex")]),t._v(" "),a("ul",[a("li",[a("s",[t._v("其他等我真的用到再回來補 ﾚ(ﾟ∀ﾟ;)ﾍ=З=З=З")])])]),t._v(" "),a("h2",{attrs:{id:"index-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#index-api"}},[t._v("#")]),t._v(" Index API")]),t._v(" "),a("p",[a("font",{attrs:{color:"FF0000",size:"5"}},[a("strong",[t._v("紀錄幾個主要 Index APIs")])])],1),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("動作")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("API")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("增")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("PUT /my-index-000001")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("刪")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("DELETE /my-index-000001")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("改")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Index 一旦建立就不能修改了，"),a("br"),t._v("只能通過遷移即 ReIndex，"),a("br"),t._v("通常搭配 Alias 來使用(Alias + ReIndex)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("查")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("GET /my-index-000001")])])])]),t._v(" "),a("h2",{attrs:{id:"create-index-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-index-api"}},[t._v("#")]),t._v(" Create index API")]),t._v(" "),a("p",[t._v("新增索引")]),t._v(" "),a("blockquote",[a("p",[t._v("To delete all indices, use _all or * . To disallow the deletion of indices with _all or wildcard expressions,"),a("br"),t._v("\nset the action.destructive_requires_name cluster setting to true.")])]),t._v(" "),a("p",[t._v("支持通配符，可以使用 _all 或 * 刪除所有索引，可以在 Elasticsearch 設定中設定禁止此類型操作")]),t._v(" "),a("ul",[a("li",[a("p",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("Request")])]),a("br"),t._v(" "),a("code",[t._v("PUT /<index>")])],1)]),t._v(" "),a("li",[a("p",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("Example")])])],1),t._v(" "),a("div",{staticClass:"language-JSON extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("PUT /book-index"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("-0001")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("Result")])])],1),t._v(" "),a("div",{staticClass:"language-JSON extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"acknowledged"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"shards_acknowledged"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"index"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"book-index-0001"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("索引命名原則")])])],1),t._v(" "),a("ul",[a("li",[t._v("Lowercase only(只能小寫)")]),t._v(" "),a("li",[t._v('Cannot include , /, *, ?, ", <, >, |, '),a("code"),t._v(" (space character), ,, #(不能包含這些字元)")]),t._v(" "),a("li",[t._v("Cannot start with -, _, +")]),t._v(" "),a("li",[t._v("Cannot be . or ..")]),t._v(" "),a("li",[t._v("Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)(涉及底層設計不能超過 255 bytes)")])])])]),t._v(" "),a("h2",{attrs:{id:"delete-index-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delete-index-api"}},[t._v("#")]),t._v(" Delete index API")]),t._v(" "),a("p",[t._v("刪除索引")]),t._v(" "),a("ul",[a("li",[a("p",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("Request")])]),a("br"),t._v(" "),a("code",[t._v("DELETE /<index>")])],1)]),t._v(" "),a("li",[a("p",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("Example")])])],1),t._v(" "),a("div",{staticClass:"language-JSON extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("DELETE /book-index"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("-0002")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("Result")])])],1),t._v(" "),a("div",{staticClass:"language-JSON extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"acknowledged"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"get-index-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-index-api"}},[t._v("#")]),t._v(" Get index API")]),t._v(" "),a("p",[t._v("檢視索引")]),t._v(" "),a("blockquote",[a("p",[t._v("(Required, string) Comma-separated list of data streams, indices, and aliases used to limit the request."),a("br"),t._v("\nSupports wildcards (*).")])]),t._v(" "),a("p",[t._v("支持通配符，可以使用 _all 或 * 查詢所有索引")]),t._v(" "),a("ul",[a("li",[a("p",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("Request")])]),a("br"),t._v(" "),a("code",[t._v("GET /<target>")])],1)]),t._v(" "),a("li",[a("p",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("Example")])])],1),t._v(" "),a("div",{staticClass:"language-JSON extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("GET /book-index"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("-0001")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("font",{attrs:{color:"63C5DA"}},[a("strong",[t._v("Result")])])],1),t._v(" "),a("div",{staticClass:"language-JSON extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"book-index-0001"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"aliases"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mappings"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"settings"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"index"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"routing"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"allocation"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"include"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"_tier_preference"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data_content"')]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"number_of_shards"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"provided_name"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"book-index-0001"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"creation_date"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1656515329424"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"number_of_replicas"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uuid"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7DdAjOwdSlmXGuX7dKp_9g"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"created"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7170199"')]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"listed-indices"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#listed-indices"}},[t._v("#")]),t._v(" Listed indices")]),t._v(" "),a("p",[t._v("還有另一種方式也可以列出索引就是 "),a("code",[t._v("cat")]),t._v("，"),a("br"),t._v("\n區別是用 Get 取的索引資訊會詳細不少")]),t._v(" "),a("p",[t._v("使用 cat API Request: "),a("code",[t._v("GET /_cat/indices")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("    yellow "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" mybeat-2022.06.27               9SdlB48_RaKldQRgBQhKhg "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("   243kb   243kb\n    green  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" .geoip_databases                1cJrOdYzQruU1fc_A5o3Hw "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("77")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("75")]),t._v(".9mb  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("75")]),t._v(".9mb\n    yellow "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" mybeat-2022.06.28               fItzFNKkRSiLJzWEFSxMzg "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("69")]),t._v(".4kb  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("69")]),t._v(".4kb\n    green  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" .apm-custom-link                UE04kRu1Q32E23P9o2aHWg "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    226b    226b\n    yellow "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" book-index-0001                 7DdAjOwdSlmXGuX7dKp_9g "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    226b    226b\n    green  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" .apm-agent-configuration        5H2_N1KXQEyAczk8Szpq5w "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    226b    226b\n    yellow "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" movie-index-000001              Y29WUJ1JRZurwFxrCWETBA "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    226b    226b\n    green  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" .kibana_task_manager_7.17.1_001 fG9VCeHmTS6i5zrUAPzj4A "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5910")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("879")]),t._v(".9kb "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("879")]),t._v(".9kb\n    green  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" .kibana_7.17.1_001              h3kEcPD0RhWmRKYdSlATOQ "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("37")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(".7mb   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(".7mb\n    yellow "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" mybeat-2022.06.26               mEBdUe-wRum4gI-VxhSsuA "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("138")]),t._v(".6kb "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("138")]),t._v(".6kb\n    green  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),t._v(" .tasks                          kh3_uU9iQJmofYrXL7DslQ "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("55")]),t._v(".7kb  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("55")]),t._v(".7kb\n")])])]),a("h2",{attrs:{id:"rename-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rename-index"}},[t._v("#")]),t._v(" Rename Index")]),t._v(" "),a("p",[t._v("在 Elasticsearch 索引建置下去就是建置下去了幾乎是不能後悔，"),a("br"),t._v("\n那有沒有提供一個彈性的作法呢?"),a("br"),t._v("\n有的，就是 ReIndex 的機制又稱數據遷移，"),a("br"),t._v("\n通常會搭配 Index aliases 來執行 ReIndex，"),a("br"),t._v("\n甚麼情況下會需要 ReIndex:")]),t._v(" "),a("ul",[a("li",[t._v("資料量真得太過龐大需要重新規劃分片")]),t._v(" "),a("li",[t._v("需要修改 mapping 時")])]),t._v(" "),a("p",[a("s",[t._v("預計會有一個章節筆記 Reindex 吧(或用到的時候)")]),t._v("(大概至少在 aliases 會稍微提到)")]),t._v(" "),a("h2",{attrs:{id:"conclusion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conclusion"}},[t._v("#")]),t._v(" Conclusion")]),t._v(" "),a("p",[t._v("關於 Index 相關的東西實在還有很多，"),a("br"),t._v("\n一部分一部分來吧..."),a("br"),t._v("\n或有用到再補!?")])])}),[],!1,null,null,null);s.default=n.exports}}]);