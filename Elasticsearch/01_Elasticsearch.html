<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ELasticsearch | 我的 Elastic Stack 筆記</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="已經到了不記下來就會忘記的年紀了，紀錄一下自身學習 Elasticsearch;Logstash;Kibana;Beats 的一些歷程">
    
    <link rel="preload" href="/BookELK/assets/css/0.styles.d96730b3.css" as="style"><link rel="preload" href="/BookELK/assets/js/app.bba641e9.js" as="script"><link rel="preload" href="/BookELK/assets/js/2.ac8a0c5c.js" as="script"><link rel="preload" href="/BookELK/assets/js/6.b93db297.js" as="script"><link rel="prefetch" href="/BookELK/assets/js/10.fcf8cf2b.js"><link rel="prefetch" href="/BookELK/assets/js/11.fd8d2293.js"><link rel="prefetch" href="/BookELK/assets/js/12.8cb8baa5.js"><link rel="prefetch" href="/BookELK/assets/js/13.86964c32.js"><link rel="prefetch" href="/BookELK/assets/js/14.451bef2f.js"><link rel="prefetch" href="/BookELK/assets/js/15.4cbb1fc0.js"><link rel="prefetch" href="/BookELK/assets/js/16.fe14d357.js"><link rel="prefetch" href="/BookELK/assets/js/17.8054f2e4.js"><link rel="prefetch" href="/BookELK/assets/js/18.62f82abb.js"><link rel="prefetch" href="/BookELK/assets/js/19.195d4887.js"><link rel="prefetch" href="/BookELK/assets/js/20.d56f83ed.js"><link rel="prefetch" href="/BookELK/assets/js/21.b8a1e520.js"><link rel="prefetch" href="/BookELK/assets/js/22.47e00214.js"><link rel="prefetch" href="/BookELK/assets/js/23.8661ea41.js"><link rel="prefetch" href="/BookELK/assets/js/24.da189f21.js"><link rel="prefetch" href="/BookELK/assets/js/25.eb469563.js"><link rel="prefetch" href="/BookELK/assets/js/26.0d1a64a7.js"><link rel="prefetch" href="/BookELK/assets/js/27.9e6d7e44.js"><link rel="prefetch" href="/BookELK/assets/js/28.5ce2c336.js"><link rel="prefetch" href="/BookELK/assets/js/29.4b31ab57.js"><link rel="prefetch" href="/BookELK/assets/js/3.dd1d83d3.js"><link rel="prefetch" href="/BookELK/assets/js/30.c7c4bb77.js"><link rel="prefetch" href="/BookELK/assets/js/31.13ac2548.js"><link rel="prefetch" href="/BookELK/assets/js/32.e15550b8.js"><link rel="prefetch" href="/BookELK/assets/js/4.5424033a.js"><link rel="prefetch" href="/BookELK/assets/js/5.e56d5024.js"><link rel="prefetch" href="/BookELK/assets/js/7.ccc07bfb.js"><link rel="prefetch" href="/BookELK/assets/js/8.976d0ce3.js"><link rel="prefetch" href="/BookELK/assets/js/9.8d8ab53b.js">
    <link rel="stylesheet" href="/BookELK/assets/css/0.styles.d96730b3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/BookELK/" class="home-link router-link-active"><!----> <span class="site-name">我的 Elastic Stack 筆記</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Elasticsearch</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BookELK/Elasticsearch/01_Introduction.html" class="sidebar-link">ELK Stack Intro</a></li><li><a href="/BookELK/Elasticsearch/01_Elasticsearch.html" aria-current="page" class="active sidebar-link">Elasticsearch Intro</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#more-about-elasticsearch" class="sidebar-link">More About ELasticsearch</a></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#rdbms-vs-elasticsearch" class="sidebar-link">RDBMS vs. Elasticsearch</a></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#index" class="sidebar-link">Index</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#inverted-index" class="sidebar-link">Inverted Index</a></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#inverted-index-for-elasticsearch" class="sidebar-link">Inverted Index For Elasticsearch</a></li></ul></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#document" class="sidebar-link">Document</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#mapping" class="sidebar-link">Mapping</a></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#dynamic-mapping" class="sidebar-link">Dynamic mapping</a></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#explicit-mapping" class="sidebar-link">Explicit mapping</a></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#field" class="sidebar-link">Field</a></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#metadata-fields" class="sidebar-link">Metadata fields</a></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#field-data-types" class="sidebar-link">Field data types</a></li></ul></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#search" class="sidebar-link">Search</a></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#analyzer" class="sidebar-link">Analyzer</a></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#distributed-document-store" class="sidebar-link">Distributed Document Store</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#shard" class="sidebar-link">Shard</a></li><li class="sidebar-sub-header"><a href="/BookELK/Elasticsearch/01_Elasticsearch.html#replica" class="sidebar-link">Replica</a></li></ul></li></ul></li><li><a href="/BookELK/Elasticsearch/02_Index.html" class="sidebar-link">Index</a></li><li><a href="/BookELK/Elasticsearch/02_Document.html" class="sidebar-link">Document</a></li><li><a href="/BookELK/Elasticsearch/02_Mapping.html" class="sidebar-link">Mapping</a></li><li><a href="/BookELK/Elasticsearch/02_Aliases.html" class="sidebar-link">Index Aliases</a></li><li><a href="/BookELK/Elasticsearch/02_Analyzer.html" class="sidebar-link">Analyzer</a></li><li><a href="/BookELK/Elasticsearch/02_AnalyzerCh.html" class="sidebar-link">Analyzer 中文分詞</a></li><li><a href="/BookELK/Elasticsearch/02_SearchAPI.html" class="sidebar-link">Search API</a></li><li><a href="/BookELK/Elasticsearch/02_Query.html" class="sidebar-link">Query DSL</a></li><li><a href="/BookELK/Elasticsearch/02_Aggregations.html" class="sidebar-link">Aggregations</a></li><li><a href="/BookELK/Elasticsearch/03_Cat.html" class="sidebar-link">Cat</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>kibana</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Logstash</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Beats</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Demo</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Elastic stack</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="elasticsearch"><a href="#elasticsearch" class="header-anchor">#</a> ELasticsearch</h1> <p>📕 <strong>Chapter Objectives</strong></p> <ul><li>ELasticsearch 更多基礎知識</li> <li>如同進行正規球賽前要先熟悉規則，使用 ELasticsearch 前基本相關名詞也需要略知一二</li> <li>由關聯型數據庫的概念切入 Elasticsearch 加速理解速度</li> <li>Elasticsearch = ES(縮寫)</li></ul> <p>📘 <strong>Reference</strong></p> <ul><li><a href="https://www.elastic.co/elasticsearch/" target="_blank" rel="noopener noreferrer">官網<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.elastic.co/blog/what-is-an-elasticsearch-index" target="_blank" rel="noopener noreferrer">What is an Elasticsearch Index?(2013)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="more-about-elasticsearch"><a href="#more-about-elasticsearch" class="header-anchor">#</a> More About ELasticsearch</h2> <p>ELasticsearch 有著 Scalability(可擴展) 與 Near real-time search(接近即時搜尋) 的特性，<br>
同時也提供了高可用(high availability)的集群架構，<br>
ELasticsearch 想解決的核心問題就是在數據量大的狀況下也能保有搜尋速度，<br>
當初作者 Shay Banon 在設計的時候，一開始就是朝向分布式部屬的面相開發 ELasticsearch<br>
ELasticsearch 核心要素有三個:</p> <ul><li><font color="#63C5DA" size="4"><strong>Data in : documents and indices</strong></font></li> <li><font color="#63C5DA" size="4"><strong>Information out : search and analyze</strong></font></li> <li><font color="#63C5DA" size="4"><strong>Scalability and resilience</strong></font></li></ul> <p></p> <ul><li><p>📓 <font color="008000"><strong>關於系統設計知識補充</strong></font></p> <ul><li><p>分散式系統設計準則 CAP</p> <ul><li>Consistency (一致性)</li> <li>Availability (可用性)</li> <li>Partition Tolerance (分區容忍性)</li></ul> <p>📝 一般來說一個分散式架構下，三種特性中只能滿足兩種，<br>
      拿CAP理論對比資料處理也會有以下三種特性:</p></li> <li><p>資料處理系統設計</p> <ul><li>數據量龐大</li> <li>近即時處理</li> <li>資料準確性</li></ul> <p>📝 同理，在資料處理上好像也有類似的概念(之前看到的，找不到原文了...)，<br>
      而 Elasticsearch 當然是做了某些取捨，使用上請依自身情況把握</p> <ul><li>Elasticsearch 捨棄的是資料準確性，不過在某些數據量巨大的應用場景下，已經不會在乎那一點點資料錯誤了</li> <li>若要滿足數據量巨大與資料準確性兩個因素，可以使用 Hadoop 或 HBase ...來處理，但就不可能 Realtime 了</li> <li>資料量小的情況下，什麼!你說資料量小的情況，那沒事了</li></ul></li></ul></li></ul> <h2 id="rdbms-vs-elasticsearch"><a href="#rdbms-vs-elasticsearch" class="header-anchor">#</a> RDBMS vs. Elasticsearch</h2> <p>要瞭解 Elasticsearch 可以先用 RDBMS 的概念來對比會比較好理解，但必須<br> <font color="#FF0000" size="4">注意只是拿使用概念來類比，並非 Elasticsearch 本身設計是依 RDBMS 的邏輯開發，兩者在本質上是天差地別</font><br>
以下是以 RDBMS 的方式理解 Elasticsearch :<br></p> <ul><li>📓 <font color="008000"><strong>Type補充</strong></font></li></ul> <p>    Type 這個概念已經在新版本 8.x 中移除，<br>
    而在 7.x 版本中 Type 已經被定義為預設的 _doc，<br>
    因為在 Elasticsearch 中一切皆是索引，不需要再額外劃分一層 Type 來分類，於是被當成過度設計而<font color="#FF0000" size="4">棄用</font><br></p> <table><thead><tr><th>RDBMS    </th> <th>Elasticsearch  </th></tr></thead> <tbody><tr><td>Database</td> <td>Index</td></tr> <tr><td><s>Table</s></td> <td><s>Type</s></td></tr> <tr><td>Row</td> <td>Document</td></tr> <tr><td>Column</td> <td>Fields</td></tr> <tr><td>Schema</td> <td>Mapping</td></tr> <tr><td>SQL</td> <td>Query DSL</td></tr></tbody></table> <p></p> <p>用最簡單的方式，建立&quot;儲存資料的容器&quot;到&quot;將資料儲存到實體位置&quot;的實用角度上來切入 :</p> <ul><li><p>RDBMS</p> <ul><li>建資料庫</li> <li>建資料表</li> <li>設計欄位</li> <li>插入資料</li></ul> <p><img src="/BookELK/assets/img/RDBMSflow.9f678a67.png" alt="RDBMSflow"></p></li> <li><p>Elasticsearch</p> <ul><li>建立索引 (Index)</li> <li>設計映射 (Mapping)，此步驟也不一定要有</li> <li>插入文件 (Document)</li></ul> <p><img src="/BookELK/assets/img/ESflow.d4596412.png" alt="ESflow"></p></li></ul> <p>最後來看一下官方部落格上面的論述(2013年，所有還有Type的概念)</p> <blockquote><p>The easiest and most familiar layout clones what you would expect from a relational database.<br>
You can (very roughly) think of an index like a database.<br>
● MySQL =&gt; Databases =&gt; Tables =&gt; Columns/Rows<br>
● Elasticsearch =&gt; Indices =&gt; Types =&gt; Documents with Properties</p></blockquote> <p>Elasticsearch 一詞拆開來看就是 Elastic + Search，<br>
Elastic 有靈活的意思；Search 則是搜尋，<br>
為了讓使用者能靈活搜尋，Elasticsearch 在一些格式定義上相對靈活，<br>
不過要百分之百發揮 Elasticsearch 的搜尋速度還是建議將 &quot;需搜尋的欄位&quot; 的定義給確定下來<br>
不然官方就不會有文件是專門闡述 Mapping 這個部份了<br> <br>
另一個 Elasticsearch 與 RDBMS 的巨大差異就是 <font color="#FF0000">Elasticsearch 不具備 Transaction 的概念</font>，<br>
但單個請求下是保有 ACID 特性，雖然講起來好像有點矛盾!?<br>
不過實際使用過 Elasticsearch API 之後，就會有比較深刻的了解 (前提是必須了解RDBMS ACID And Transaction)<br> <br>
所以在真實的應用場景下 Elasticsearch 不會取代 RDBMS，反而是兩者併行相輔相成，<br>
RDBMS 負責插入與更新資料，再把資料同步到 Elasticsearch 進行搜索。</p> <h2 id="index"><a href="#index" class="header-anchor">#</a> Index</h2> <p>Index (索引)為 Elasticsearch 的核心概念之一，<br>
核心三要之一便是 <code>Data in : documents and indices</code>，<br>
當資料往 Elasticsearch 輸入時，兩個關鍵便是 <strong>documents</strong> and <strong>indices</strong>，<br>
若是說<font color="#FF0000">搜尋引擎為 Elasticsearch 的核心概念，Index 就是支撐這個核心概念的基石</font>，<br>
若要在 ELK Stack 相關應用上有良好的使用體驗，務必要掌握一下 Index，<br>
自身的心得是 Elasticsearch Index 這個東西&quot;極端神秘&quot;</p> <ul><li>索引為文件的集合，簡單來說就是把同類型的 documents 藉由 Index 集合再一起，<br>
當然索引的設計牽涉到整體搜尋的速度，假設把系統中所有的 documents 都用一個 Index 存起來<br>
想當然爾...</li> <li>而一個 Elasticsearch Index 又會分布在一個或多個 Shard 中，而每一個 Shard 又會有自身的 Lucene Index</li> <li>Inverted Index</li></ul> <p><s>這小節有點難寫.. 先擱置一下</s></p> <h3 id="inverted-index"><a href="#inverted-index" class="header-anchor">#</a> Inverted Index</h3> <p>🌍 <font color="#63C5DA" size="4"><strong>www.elastic.co</strong></font></p> <blockquote><p>Elasticsearch uses a data structure called an inverted index that supports very fast full-text searches.</p></blockquote> <p>🌍 <font color="#63C5DA" size="4"><strong>Wikipedia</strong></font></p> <blockquote><p>倒排索引（英語：Inverted index），也常被稱為反向索引、置入檔案或反向檔案，<br>
是一種索引方法，被用來儲存在全文搜尋下某個單詞在一個文件或者一組文件中的儲存位置的對映。<br>
它是文件檢索系統中最常用的資料結構。</p></blockquote> <p><font color="#FF0000"><strong>Elasticsearch 使用 Inverted Index 的資料結構來實現快速的全文搜尋</strong></font>，<br>
關於反向索引或稱倒排索引已經是老生常談了(Google一下就一堆)，<br>
簡單的記錄一下</p> <p><img src="/BookELK/assets/img/InvertedIndexExample.f180ffb4.png" alt="invertedindexexample"></p> <ul><li><font color="#63C5DA" size="4"><strong>簡略的轉置流程</strong></font></li></ul> <p>若要建立 Inverted Index，首先所有的 Document 會先經過分詞、分析、停用詞、字元轉換後，<br>
割成一個一個最小的單詞，再由這些單詞集合成 Inverted Index，<br>
※所以當我們搜尋 <code>what</code> 的時候，我們可以知道 <code>what</code> 這個關鍵字在文件ID為 <code>0,1</code> 這兩個文件中，便不用在每個文件尋訪，<br>
以 Wiki 的三句文字為例子，流程如下圖:<br> <br> <img src="/BookELK/assets/img/Invertedindexflow.cd48dd0b.png" alt="invertedindexflow"><br></p> <p>若以 Forward Index (索引) vs. Invert Index (反向索引) 來切入，<br>
Invert Index 資料結構是典型的搜尋引擎檢索演算法重要的部分，<br>
事實上正因為 Invert Index 的特性，Invert Index 也是文件檢索系統中最常用的資料結構，<br>
Forward Index vs. Invert Index 兩者比較如下圖:<br> <br> <img src="/BookELK/assets/img/forwardvsinvertedindex.381b84c7.png" alt="forwardvsinvertedindex"><br></p> <h3 id="inverted-index-for-elasticsearch"><a href="#inverted-index-for-elasticsearch" class="header-anchor">#</a> Inverted Index For Elasticsearch</h3> <p>更深入的來探討 Elasticsearch 對於 Inverted Index 的實現<br> <s>這個要整理很久，先把大綱打好</s>(未完待續)</p> <h2 id="document"><a href="#document" class="header-anchor">#</a> Document</h2> <blockquote><p>Elasticsearch is a distributed document store.<br>
Instead of storing information as rows of columnar data,<br>
Elasticsearch stores complex data structures that have been serialized as JSON documents.</p></blockquote> <ul><li><p><font color="#63C5DA" size="4"><strong>重點 =&gt;</strong></font> <code>Elasticsearch is a distributed document store</code><br> <strong>Elasticsearch 是一個<font color="#FF0000">分布式</font>的<font color="#FF0000">文件資料庫</font></strong><br> <strong>Elasticsearch 是一個<font color="#FF0000">分布式</font>的<font color="#FF0000">文件資料庫</font></strong><br> <strong>Elasticsearch 是一個<font color="#FF0000">分布式</font>的<font color="#FF0000">文件資料庫</font></strong></p></li> <li><p><font color="#63C5DA" size="4"><strong>Index 與 Documents 的關係</strong></font><br>
最 <font color="FF4500"><strong>簡單</strong></font> 來說就是一個 Index 裡面，會有很多同屬性的 Documents<br>
(當然實際場景下遠比這個複雜得多，還有 Node; Shard; 那些有的沒的)<br> <br> <img src="/BookELK/assets/img/IndexandDocument.2f1db41a.png" alt="IndexandDocument"></p></li> <li><p><font color="#63C5DA" size="4"><strong>數據最小單位</strong></font></p> <p>Document 已經是 Elasticsearch 儲存資料單元中最小的單位了</p></li> <li><p><font color="#63C5DA" size="4"><strong>JSON Documents</strong></font></p> <blockquote><p>Elasticsearch stores complex data structures that have been serialized as JSON documents</p></blockquote> <p>儲存進 Elasticsearch 的資料都將被序列化為 JSON documents，<br>
所以 documents 通常以 JSON 來表示，<br>
事實上，再使用 Elasticsearch 時也都透過 HTTP 與 JSON 來與 Elasticsearch 溝通居多</p></li> <li><p><font color="#63C5DA" size="4"><strong>Unique Id</strong></font></p> <p>每個 Document 接有自己的唯一 ID，<br>
不管是在建立的時候使用者賦予，或是由系統自身配給，<br>
通常讓系統本身管理會是比較明智的選擇</p></li> <li><p><font color="#63C5DA" size="4"><strong>Schema-less</strong></font></p> <blockquote><p>Elasticsearch also has the ability to be schema-less</p></blockquote> <p>Schema-less 為一種彈性的儲存結構，並不僅限存在於 Elasticsearch 中，<br>
MongoDB ...等等的資料庫，也是具備 Schema-less 屬性，<br>
Schema-less 提供了什麼特性?</p> <blockquote><p>which means that documents can be indexed without explicitly specifying how to handle each of the different fields that might occur in a document.</p></blockquote> <p>在存儲資料時不需要事先定義美個文件中的格式(fields)便可將文件儲存，<br>
Elasticsearch 中提供 <font color="FF4500">Dynamic mapping</font> 的機制，<br>
在文件進到 Elasticsearch Index 時會自動的判別 fields 並把 fields 添加進 Index 中，</p> <blockquote><p>​just start indexing documents and Elasticsearch will detect and map booleans,<br>
floating point and integer values, dates, and strings to the appropriate Elasticsearch data types.</p></blockquote> <p>使用者僅需要往索引中間添加文件，Elasticsearch 會自動幫你判別型態，<br>
需要注意的是 Dynamic mapping 也不是如此的完美，<br>
所以有時候還是需要使用者自己定義</p></li> <li><p>📓 <font color="008000"><strong>Schema-less 知識補充</strong></font></p> <p>Schema-less 雖然看似方便其實還是有些問題存在 1. 需要大量 Index ; 2.弱資料正確性<br>
所以 MongoDB 變成有點類似 Dynamic schema，<br>
Elasticsearch 則是有 Dynamic mapping，<br>
到若要在本質上攻克 Schema-less 有另一個東西，Wide Column Stores - <code>Cassandra</code></p></li> <li><p>📓 <font color="008000"><strong>關於 NoSQL 知識補充</strong></font></p> <p>Elasticsearch 屬於文件型資料庫，<br>
Google <code>NoSQL</code> 拉到文件儲存列表就會看到了，<br>
目前對於 NoSQL 分類的主流說法，大體分成四個:</p> <ul><li>文件型資料庫</li> <li>Key-value 鍵值對資料庫</li> <li>圖資料庫</li> <li>列資料庫</li></ul></li></ul> <h3 id="mapping"><a href="#mapping" class="header-anchor">#</a> Mapping</h3> <blockquote><p>Mapping is the process of defining how a document, and the fields it contains, are stored and indexed.</p></blockquote> <ul><li>📓 <font color="008000"><strong>Mapping Types 知識補充</strong></font></li></ul> <blockquote><p>Elasticsearch 8.0.0 no longer supports mapping types.<br>
For details on how to migrate your clusters away from mapping types,<br>
see the removal of types documentation for the 7.x release.</p></blockquote> <p>隨著 types 的棄用，Elasticsearch 8.0.0 已經不提供 Mapping Types 機制，
稍微注意一下就好</p> <h3 id="dynamic-mapping"><a href="#dynamic-mapping" class="header-anchor">#</a> Dynamic mapping</h3> <h3 id="explicit-mapping"><a href="#explicit-mapping" class="header-anchor">#</a> Explicit mapping</h3> <h3 id="field"><a href="#field" class="header-anchor">#</a> Field</h3> <h3 id="metadata-fields"><a href="#metadata-fields" class="header-anchor">#</a> Metadata fields</h3> <h3 id="field-data-types"><a href="#field-data-types" class="header-anchor">#</a> Field data types</h3> <h2 id="search"><a href="#search" class="header-anchor">#</a> Search</h2> <h2 id="analyzer"><a href="#analyzer" class="header-anchor">#</a> Analyzer</h2> <h2 id="distributed-document-store"><a href="#distributed-document-store" class="header-anchor">#</a> Distributed Document Store</h2> <h3 id="shard"><a href="#shard" class="header-anchor">#</a> Shard</h3> <h3 id="replica"><a href="#replica" class="header-anchor">#</a> Replica</h3></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/BookELK/Elasticsearch/01_Introduction.html" class="prev">
        ELK Stack Intro
      </a></span> <span class="next"><a href="/BookELK/Elasticsearch/02_Index.html">
        Index
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/BookELK/assets/js/app.bba641e9.js" defer></script><script src="/BookELK/assets/js/2.ac8a0c5c.js" defer></script><script src="/BookELK/assets/js/6.b93db297.js" defer></script>
  </body>
</html>
